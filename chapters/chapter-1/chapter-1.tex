% Section avec titre coloré et cliquable vers le sommaire
\section[\texorpdfstring{Créer notre premier projet Compose}{Créer notre premier projet Compose}]%
{\hyperref[sec:sommaire]{\textcolor{orange}{Créer notre premier projet Compose}}}%
\label{sec:chapter-1}

{\footnotesize
\textcolor{darkgray} {Avant de créer notre premier projet Jetpack Compose, il est nécessaire de disposer
d'un environnement de développement prêt à l'emploi.  
Vous pouvez télécharger et installer Android Studio gratuitement depuis le site officiel : }
\href{https://developer.android.com/studio}{\textcolor{blue}{Télécharger Android Studio}}.
}
\vspace{1.5em}


% Texte descriptif des étapes (pas de lignes vides dans \textcolor)
{\footnotesize
\textcolor{darkgray}{\textbf{Première étape :} Lors de la création d'un nouveau projet sous Android Studio,
il faut commencer par choisir \textit{Empty Activity}, ce qui permet de démarrer
avec une structure minimale et totalement personnalisable.}
}

\vspace{0.5em}

{\footnotesize
\textcolor{darkgray}{\textbf{Deuxième étape :} Ensuite, il est nécessaire de donner un nom à votre projet,
définir le langage (Kotlin de préférence) et choisir l'emplacement de sauvegarde. \textcolor{darkgray}{\textbf{Zoomer sur les deux photo pour voir les détails.}}} 
}

% Custom command: \mygraphics[<options>]{<image-path>}{<title>}
\newcommand{\mygraphics}[3][]{%
  \tcbox[
    enhanced,
    capture=minipage,
    boxsep=0pt,top=0pt,bottom=0pt,left=0pt,right=0pt,
    boxrule=0.4pt,
    drop fuzzy shadow,
    nobeforeafter,
    colback=black!75!white,
    toptitle=2pt,bottomtitle=2pt,
    center title,
    fonttitle=\small\sffamily,
    title={#3},
    width=(\linewidth-4mm)/2,
    height=6cm,
    colbacktitle={black},
    watermark zoom=1.0,
    watermark graphics={#2}
  ]{}%
}

% Images côte-à-côte
\noindent
\mygraphics{images/chapter-1/android-studio-1.png}{Première étape : Choisir Empty Activity}%
\hfill
\mygraphics{images/chapter-1/android-studio-2.png}{Deuxième étape : Nommer le projet}

\vspace{1em}



    {\footnotesize
\textcolor{darkgray}{\textbf{Troixième étape : } Ouvrir  \texttt{MainActivity.kt} pour voir le code généré par défaut.} 
    }


\subsection*{Explication du code par défaut}


{\footnotesize
\textcolor{darkgray}{\texttt{\textcolor{orange}{class MainActivity : ComponentActivity()}} Il s'agit de la classe principale de l'application Android.
Pour la class \texttt{\textcolor{orange}{ComponentActivity}} : Une classe de base fournie par Android pour héberger des composants Jetpack Compose.
}
}

\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{override fun onCreate(savedInstanceState: Bundle?)}} Fonction appelée automatiquement lors de la création de l'activité. C'est ici que l'on initialise l'écran grâce à la fonction \texttt{setContent\{ ... \}}.
}
}

\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{setContent\{ ... \}}} Remplace \texttt{\textcolor{orange}{setContentView()}} utilisé dans les interfaces XML. Permet de définir l'interface utilisateur directement en Compose, c'est-à-dire avec du code déclaratif en Kotlin.
}
}




\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{GestionDesTachesTheme\{ ... \}}} Thème visuel généré automatiquement par Android Studio. Il définit les couleurs, les typographies et les formes de l'application.
}
}


\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{Scaffold(...)}}
Structure de base de l'écran (layout).
Elle gère les barres d'application, le contenu principal et le bouton d'action flottant (FAB).
}
}

\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{Greeting(name: String)}}
Fonction annotée avec \texttt{@Composable}, ce qui signifie qu'elle produit du contenu visuel.
Elle affiche le texte \texttt{Hello Android!} .
}
}

\vspace{0.7em}

{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{@Preview(showBackground = true)}}
Annotation permettant la prévisualisation du composant dans Android Studio, sans exécuter l'application.
La fonction \texttt{GreetingPreview()} affiche le message \texttt{Hello Android!}  sur fond clair.
}
}



\vspace{1em}

% --- Code Kotlin principal ---
\begin{ktlst}
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            GestiondesTachesTheme {
                Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding ->
                    Greeting(
                        name = "Android",
                        modifier = Modifier.padding(innerPadding)
                    )
                }
            }
        }
    }
}

@Composable
fun Greeting(name: String, modifier: Modifier = Modifier) {
    Text(
        text = "Hello \$name!",
        modifier = modifier
    )
}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {
    GestiondesTachesTheme {
        Greeting("Android")
    }
}
\end{ktlst}

\subsection*{\hyperref[sec:sommaire]{\textcolor{orange}{Le cycle de vie d'un composable}}}
\phantomsection
\label{subsec:composable-lifecycle}

{\footnotesize
\textcolor{darkgray}{
Pour résumer, ce code génère une application Android simple avec une interface utilisateur définie en Jetpack Compose.
L'écran affiche un message de bienvenue "Hello Android!" en utilisant une fonction composable.
}
}
\vspace{1em}
{\footnotesize
\textcolor{darkgray}{
Mantement que nous avons compris le code généré par défaut, nous allons le modifier pour créer une application de comptage  simple, que l'utilisateur pourra utiliser pour afficher un compteur sur l'ecran et incrémenter sa valeur en appuyant sur un bouton.
}
}
\vspace{1em}
% Fin de la section

{\footnotesize
\textcolor{darkgray}{
Nous allons commencer par supprimer le code généré automatiquement dans \texttt{MainActivity.kt} et le remplacer par le code suivant :
}
}
\vspace{1em}
% --- Code Kotlin modifié ---
\begin{ktlst}
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            CompteurApp()
        }
    }
}   
@Composable
fun CompteurApp() {
    var count by remember { mutableStateOf(0) }
    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text(text = "Compteur : \$count", fontSize = 32.sp)
        Spacer(modifier = Modifier.height(16.dp))
        Button(onClick = { count++ }) {
            Text(text = "Incrémenter")
        }
    }
}       
\end{ktlst}
{\footnotesize
\textcolor{darkgray}{
Ce code crée une application de comptage simple avec un bouton pour incrémenter la valeur du compteur. Nous allons maintenant expliquer chaque partie de ce code.
}
}

\vspace{1em}
{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{CompteurApp()}} Fonction composable principale de l'application. Elle gère l'état du compteur et affiche le texte et le bouton.
}
}
\vspace{0.7em}
{\footnotesize
\textcolor{darkgray}{
\texttt{\textcolor{orange}{var count by remember \{ mutableStateOf(0) \}}} Déclaration d'une variable d'état \texttt{count} initialisée à 0. La fonction \texttt{remember} permet de conserver la valeur entre les recompositions.
}
}
\vspace{0.7em}
{\footnotesize  
\textcolor{darkgray}{
\texttt{\textcolor{orange}{Column(...)}} Conteneur vertical qui aligne ses enfants (le texte et le bouton) au centre de l'écran.
}
}
\vspace{0.7em}
{\footnotesize  
\textcolor{darkgray}{
\texttt{\textcolor{orange}{Text(...)}} Affiche le texte du compteur avec
la valeur actuelle de \texttt{count}.
}
}
\vspace{0.7em}
{\footnotesize  
\textcolor{darkgray}{
\texttt{\textcolor{orange}{Button(onClick = \{ count++ \})}} Bouton qui incrémente la valeur de \texttt{count} lorsqu'il est cliqué.
}
}
\vspace{1em}

{\footnotesize
\textcolor{darkgray}{
Avec ce code, nous avons créé une application de comptage simple en utilisant Jetpack Compose.  
Lorsque l'utilisateur appuie sur le bouton "Incrémenter", la valeur du compteur augmente et l'interface utilisateur se met à jour automatiquement pour refléter la nouvelle valeur.
}
}
\vspace{1em}
% Fin de la section 

\subsection*{Résumé}
\phantomsection
\label{sec:resume}
{\footnotesize
\textcolor{darkgray}{
Nous avons ainsi couvert les bases de la création d'une application Android avec Jetpack Compose.
Dans le prochain chapitre, nous explorerons davantage les concepts de Jetpack Compose,
y compris la gestion de l'état, la navigation entre les écrans et l'intégration avec
d'autres bibliothèques Android.
}
}

\subsection*{Le cycle de vie d'un composable}
\phantomsection
\label{subsec:composable-lifecycle}
{\footnotesize
\textcolor{darkgray}{
Le cycle de vie d'un composable est géré automatiquement par Jetpack Compose.
Lorsque l'utilisateur appuie sur le bouton "Incrémenter", la valeur du compteur augmente et l'interface utilisateur se met à jour automatiquement pour refléter la nouvelle valeur.
}
}